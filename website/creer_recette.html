<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="stylesheet" type="text/css" href="creer_recette.css"/>
    <meta charset="UTF-8">
    <title>Créer une recette</title>
</head>

<body>

    <div id="container">
      <div id="header_container">
<!--        <img id="logo" src="img/logofinal.png">-->
        <p id="title">CREER UNE RECETTE</p>
      </div>
        <form>
          <div id="section_titre">
            <label>Titre</label>
            <input type="text" id="titre_recette" required>
          </div>
          <div id="section_categorie">
            <label>Catégorie</label>
            <select name="categories" id="categorie_select" required>
              <option value="">--Sélectionner une catégorie--</option>
              <option value="Petit-dejeuner">Petit-déjeuner</option>
              <option value="Entree">Entrée</option>
              <option value="Plat">Plat</option>
              <option value="Dessert">Dessert</option>
              <option value="En-cas">En-cas</option>
              <option value="Aperitif">Apéritif</option>
              <option value="Boisson">Boisson</option>
            </select>
          </div>
          <div id="section_ingredients">
            <label id="titre_ingredients">Ingrédients</label>
            <textarea id="ingredients_area" required>
            </textarea>
            <script>
              var field  = document.getElementById('ingredients_area');
              field.value = "";
              field.focus();
              field.setSelectionRange(field, 1, 2);
            </script>
          </div>
          <div id="section_etapes">
            <label id="titre_ietapes">Etapes</label>
            <textarea id="etapes_area" required>
            </textarea>
            <script>
              var field2  = document.getElementById('etapes_area');
              field2.value = "";
              field2.focus();
              field2.setSelectionRange(field2, 1, 2);
            </script>
          </div>
          <div id="section_submit">
              <input type="submit" id="submit_btn" value="Enregistrer la recette" onclick="alert('Recette enregistrée!');window.location.href='home.html';">          </div>

        </form>

        <script>
            var recipes = JSON.parse(localStorage.getItem('MyRecipeList')) || [];

            const addRecipe = (ev)=>{
                ev.preventDefault();  //to stop the form submitting
                let recipe = {
                    id: Date.now(),
                    title: document.getElementById('titre_recette').value,
                    categorie: document.getElementById('categorie_select').value,
                    ingredient: document.getElementById('ingredients_area').value,
                    stage: document.getElementById('etapes_area').value
                }

                recipes.push(recipe);
                //saving to localStorage
                localStorage.setItem('MyRecipeList', JSON.stringify(recipes) );

                document.forms[0].reset(); // to clear the form for the next entries

            }
            document.addEventListener('DOMContentLoaded', ()=>{
                document.getElementById('submit_btn').addEventListener('click', addRecipe);
            });

        </script>

      <nav id="barre_creer_recette">
        <img id="home_icon" src="img/home.png" onclick="window.location.href='index.html';">
        <img id="book_icon" src="img/cookbook.png" onclick="window.location.href='mes_recettes.html';">
        <img id="plus_icon" src="img/add%20(1).png" onclick="window.location.href='creer_recette.html';">
        <img id="back_icon" src="img/back.png" onclick="window.location.href='index.html';">
      </nav>
    </div>

</body>

</html>
